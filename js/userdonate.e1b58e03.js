(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userdonate"],{8393:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{staticClass:"text-dark px-5",attrs:{fluid:"",id:"userdonate"}},[r("b-row",[r("b-col",[r("h3",{staticClass:"text-left mt-4"},[r("span",{staticClass:"font-weight-bold title"},[t._v("捐贈書籍")])])])],1),r("hr",{staticClass:"mb-5"}),r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)},reset:t.reset}},[r("b-form-group",{staticClass:"font-weight-bold mb-4",attrs:{label:"書本名稱","label-for":"book-name",state:t.state.name,description:"書本名稱不能為空"}},[r("b-form-input",{attrs:{id:"book-name",type:"text",required:"",placeholder:"請輸入書本名稱",state:t.state.name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("b-form-group",{staticClass:"font-weight-bold mb-4",attrs:{label:"書本類別","label-for":"book-genre",state:t.state.genre,description:"請選擇書本類別"}},[r("b-form-select",{attrs:{id:"book-genre",required:"",state:t.state.genre},model:{value:t.form.genre,callback:function(e){t.$set(t.form,"genre",t._n(e))},expression:"form.genre"}},[r("option",{attrs:{value:"1"}},[t._v("1.文學")]),r("option",{attrs:{value:"2"}},[t._v("2.雜誌")]),r("option",{attrs:{value:"3"}},[t._v("3.教科書")]),r("option",{attrs:{value:"4"}},[t._v("4.其他")])])],1),r("b-form-group",{staticClass:"font-weight-bold mb-4",attrs:{label:"書本說明","label-for":"book-description",state:t.state.description,description:"書本說明不能為空"}},[r("b-form-textarea",{attrs:{id:"book-description",type:"text",required:"",placeholder:"請輸入書本說明",state:t.state.description},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),r("img-inputer",{staticClass:"w-100",attrs:{theme:"dark",size:"large",placeholder:"點擊或拖曳選擇圖片","bottom-text":"點擊或拖曳選擇圖片以修改"},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}}),r("div",{staticClass:"text-center my-4"},[r("b-btn",{staticClass:"w-25 mr-2",attrs:{variant:"success",type:"submit"}},[t._v("送出")]),r("b-btn",{staticClass:"w-25",attrs:{variant:"danger",type:"reset"}},[t._v("重置")])],1)],1)],1)],1)],1)},s=[],o=r("1da1"),n=(r("96cf"),r("b0c0"),r("a4d3"),r("e01a"),{data:function(){return{form:{name:"",description:"",genre:1,image:null,from:this.$store.state.user.id}}},computed:{state:function(){return{name:0!==this.form.name.length||null,description:0!==this.form.description.length||null}}},methods:{reset:function(){this.form.name="",this.form.description="",this.form.genre="",this.form.image=null},submit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a in e.prev=0,r=new FormData,t.form)r.append(a,t.form[a]);return e.next=5,t.axios.post("/products",r,{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 5:t.$swal({icon:"success",title:"成功",text:"捐贈成功"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"失敗",text:"捐贈失敗"});case 11:t.form.name="",t.form.description="",t.form.genre=1,t.form.image=null;case 15:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}}),i=n,l=r("2877"),c=Object(l["a"])(i,a,s,!1,null,null,null);e["default"]=c.exports},"8f6c":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{staticClass:"text-dark px-5",attrs:{fluid:"",id:"userdonatelist"}},[r("b-row",[r("b-col",[r("h3",{staticClass:"text-left mt-4"},[r("span",{staticClass:"font-weight-bold title"},[t._v("捐贈紀錄")])])])],1),r("hr",{staticClass:"mb-5"}),r("b-row",[r("b-col",{staticClass:"mb-4",attrs:{cols:"12"}},[r("b-table",{staticClass:"table-striped table-bordered text-left",attrs:{items:t.products,fields:t.fields,responsive:""},scopedSlots:t._u([{key:"cell(image)",fn:function(t){return[r("img",{staticStyle:{height:"100px"},attrs:{src:t.item.image}})]}},{key:"cell(genre)",fn:function(e){return[1===e.item.genre?r("span",[t._v("文學")]):2===e.item.genre?r("span",[t._v("雜誌")]):3===e.item.genre?r("span",[t._v("教科書")]):r("span",[t._v("其他")])]}},{key:"cell(checked)",fn:function(e){return[e.item.checked?r("div",{staticClass:"text-success font-weight-bold"},[r("b-icon",{staticClass:"mr-1",attrs:{icon:"check2-all"}}),r("span",[t._v("已審核")])],1):r("div",{staticClass:"text-danger font-weight-bold"},[r("b-icon",{staticClass:"mr-1",attrs:{icon:"clock-fill"}}),r("span",[t._v("審核中")])],1)]}}])})],1)],1)],1)},s=[],o=r("1da1"),n=(r("96cf"),r("d81d"),r("99af"),{data:function(){return{products:[],fields:[{key:"image",label:"書本圖片"},{key:"name",label:"書本名稱"},{key:"description",label:"書本說明"},{key:"genre",label:"書本類別"},{key:"checked",label:"審核狀態"}]}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/products/from/"+t.$store.state.user.id,{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 3:r=e.sent,a=r.data,t.products=a.result.map((function(t){return t.image="".concat("https://book-x-book-shop.herokuapp.com","/files/").concat(t.image),t})),console.log(t.products),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"失敗",text:"取得商品失敗"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}}),i=n,l=r("2877"),c=Object(l["a"])(i,a,s,!1,null,null,null);e["default"]=c.exports},e01a:function(t,e,r){"use strict";var a=r("23e7"),s=r("83ab"),o=r("da84"),n=r("5135"),i=r("861d"),l=r("9bf2").f,c=r("e893"),u=o.Symbol;if(s&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var m={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(m[e]=!0),e};c(f,u);var d=f.prototype=u.prototype;d.constructor=f;var p=d.toString,b="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;l(d,"description",{configurable:!0,get:function(){var t=i(this)?this.valueOf():this,e=p.call(t);if(n(m,t))return"";var r=b?e.slice(7,-1):e.replace(g,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:f})}}}]);
//# sourceMappingURL=userdonate.e1b58e03.js.map