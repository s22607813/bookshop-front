(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admindonatelist"],{"60f6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"text-dark px-5",attrs:{fluid:"",id:"admindonatelist"}},[r("b-row",[r("b-col",[r("h3",{staticClass:"text-left mt-4"},[r("span",{staticClass:"font-weight-bold title"},[e._v("審核清單")])])])],1),r("hr",{staticClass:"mb-5"}),r("b-row",[r("b-col",{staticClass:"mb-4",attrs:{cols:"12"}},[r("b-table",{ref:"product",staticClass:"text-left table-striped table-bordered",attrs:{items:e.products,fields:e.fields,responsive:""},scopedSlots:e._u([{key:"cell(image)",fn:function(e){return[r("img",{staticStyle:{height:"100px"},attrs:{src:e.item.image}})]}},{key:"cell(from)",fn:function(t){return[r("span",[e._v(e._s(t.item.from.name))])]}},{key:"cell(genre)",fn:function(t){return[1===t.item.genre?r("span",[e._v("文學")]):2===t.item.genre?r("span",[e._v("雜誌")]):3===t.item.genre?r("span",[e._v("教科書")]):r("span",[e._v("其他")])]}},{key:"cell(checked)",fn:function(t){return[r("div",{staticClass:"text-danger font-weight-bold"},[r("b-icon",{staticClass:"mr-1",attrs:{icon:"clock-fill"}}),r("span",[e._v("審核中")])],1)]}},{key:"cell(checkButton)",fn:function(t){return[r("b-btn",{attrs:{variant:"success"},on:{click:function(r){return e.checked(t.index)}}},[r("b-icon",{staticClass:"mr-1",attrs:{icon:"patch-check-fill"}}),r("span",[e._v("審核")])],1)]}}])})],1)],1)],1)},c=[],a=r("1da1"),s=(r("96cf"),r("4de4"),r("d81d"),r("99af"),{data:function(){return{products:[],fields:[{key:"image",label:"書本圖片"},{key:"name",label:"書本名稱"},{key:"description",label:"書本說明"},{key:"genre",label:"書本類別"},{key:"from",label:"捐贈者"},{key:"checked",label:"審核狀態"},{key:"checkButton",label:"審核"}]}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("/products");case 3:r=t.sent,n=r.data,e.products=n.result.map((function(e){return e.image="".concat("https://book-x-book-shop.herokuapp.com","/files/").concat(e.image),e})).filter((function(e){return!e.checked})),e.$refs.product.refresh(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$swal({icon:"error",title:"失敗",text:"取得商品失敗"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},methods:{checked:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.products[e].checked=!0,r.next=4,t.axios.patch("/products/"+t.products[e]._id,{checked:!0},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 4:return r.next=6,t.axios.get("/products");case 6:n=r.sent,c=n.data,t.products=c.result.map((function(e){return e.image="".concat("https://book-x-book-shop.herokuapp.com","/files/").concat(e.image),e})).filter((function(e){return!e.checked})),t.$refs.product.refresh(),t.$swal({icon:"success",title:"成功",text:"審核成功"}),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),console.log(r.t0),t.$swal({icon:"error",title:"失敗",text:"審核失敗"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()}}}),o=s,i=r("2877"),l=Object(i["a"])(o,n,c,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=admindonatelist.a5efffc0.js.map